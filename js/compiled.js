var FINISHLINE="830px";var pView=function(){this.update=function(e,t){e.css("left",t)};this.gameover=function(e){if(e.attr("id")=="player1"){$("#avatar").css("background-image","url('images/squirtle_wins.gif')")}else{$("#avatar").css("background-image","url('images/charmander_wins.gif')")}$("#gameover").show()};this.hideResult=function(){$("#gameover").hide()};this.resetPlayers=function(e,t){e.css("left",0);t.css("left",0)}};var pController=function(e){var t=this;this.pokemonView=e;player1=$("#player1");player2=$("#player2");this.bindkeys=function(e){if(e.keyCode==65){position=this.currentPosition(player1);this.move(player1,position);this.zindex();this.moveGrass()}else if(e.keyCode==76){position=this.currentPosition(player2);this.move(player2,position);this.zindex();this.moveGrass()}};this.currentPosition=function(e){return parseInt(e.css("left"))};this.move=function(e,t){newPosition=t+20+"px";if(parseInt(newPosition)>=parseInt(FINISHLINE)){this.pokemonView.gameover(e);setTimeout(this.reset,3e3)}else{this.pokemonView.update(e,newPosition)}};this.zindex=function(){var e=parseInt(player1.css("left"));player2Pos=parseInt(player2.css("left"));if(e>player2Pos){player1.css("z-index",e+1)}else{player2.css("z-index",player2Pos+1)}};this.moveGrass=function(){var e=parseInt($("#front-grass").css("left"));$("#front-grass").css("left",e-2)};this.resetGrass=function(){$("#front-grass").css("left",0)};this.reset=function(){t.pokemonView.hideResult();t.pokemonView.resetPlayers(player1,player2);t.resetGrass()}};$(document).on("ready",function(){var e=new pView;pokemonController=new pController(e);view=new View;controller=new Controller(view);$(document).on("keyup",function(e){pokemonController.bindkeys(e)});controller.scrollTo();view.animateArrow();if($("#trigger").css("opacity")=="0"){var t=skrollr.init({render:function(e){console.log(e.curTop)}})}});var Controller=function(e){self=this;this.view=e;this.scrollTo=function(){if($(window).scrollTop()+$(window).height()>=$(document).height()-500){var e=$(window).scrollTop()+$(window).height()-$(document).height()-500;$("#header").css({"background-position":"center "+e/2+"px"})}$(function(){$("a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);e=e.length?e:$("[name="+this.hash.slice(1)+"]");if(e.length){$("html,body").animate({scrollTop:e.offset().top},3e3);return false}}})})};this.bindListeners=function(){this.louderListener();this.ledgerListener();this.playlistenListener()};this.louderListener=function(){$("#louder").on("mouseover",function(){self.view.showLouder($(this))});$("#louder").on("mouseout",function(){self.view.hideLouder($(this))})};this.ledgerListener=function(){$("#ledger").on("mouseover",function(){self.view.showLedger($(this))});$("#ledger").on("mouseout",function(){self.view.hideLedger($(this))})};this.playlistenListener=function(){$("#playlisten").on("mouseover",function(){self.view.showPlaylisten($(this))});$("#playlisten").on("mouseout",function(){self.view.hidePlaylisten($(this))})}};var View=function(){this.animateArrow=function(){$("#arrow").animate("bounce",{times:5},300)};this.showLouder=function(e){$(".louder-overlay").slideDown("slow");$("#louder-caption").show()};this.hideLouder=function(e){$(".louder-overlay").slideUp("slow");$("#louder-caption").hide()};this.showLedger=function(e){$(".ledger-overlay").slideDown("slow");$("#ledger-caption").show()};this.hideLedger=function(e){$(".ledger-overlay").slideUp("slow");$("#ledger-caption").hide()};this.showPlaylisten=function(e){$(".playlisten-overlay").slideDown("slow");$("#playlisten-caption").show()};this.hidePlaylisten=function(e){$(".playlisten-overlay").slideUp("slow");$("#playlisten-caption").hide()}}